pipeline {

    agent any



    stages {

        stage('Test') {

            steps {

                echo 'Unit testing'

                sh '''

                python3 --version

                cd ./cidr_convert_api/python/

                python3 tests.py

                '''                

            }

        }



        stage('SonarCloud Static Analysis') {

            steps {

                script {

                    withSonarQubeEnv ('SonarCloud') {

                        sonar-scanner.bat \

                            -D"sonar.organization=violetadfs" \

                            -D"sonar.projectKey=violetadfs_proyectofinalvioleta" \

                            -D"sonar.sources=proyectofinalvioleta/jenkinsfile." \

                            -D"sonar.host.url=https://sonarcloud.io"

                      }

                    }

                }

        }

    }

}
